name: Time-Freeze Inferno Live CI
on:
  push:
    branches:
      - main

jobs:
  live-dashboard:
    runs-on: ubuntu-latest
    steps:
      # 1ï¸âƒ£ Checkout repo
      - uses: actions/checkout@v3

      # 2ï¸âƒ£ Node setup
      - uses: actions/setup-node@v3
        with:
          node-version: '20'

      # 3ï¸âƒ£ Node & npm info
      - name: Node & npm versions
        run: |
          echo -e "\033[1;33mğŸ”¥ Time-Freeze CI Environment ğŸ”¥\033[0m"
          node -v
          npm -v
          echo "Ready to simulate the app-state!"

      # 4ï¸âƒ£ ASCII Banner
      - name: ASCII App Banners
        run: |
          echo -e "\033[1;35m"
          echo "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—         â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—"
          echo "â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•‘        â•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•"
          echo "   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  "
          echo "   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  "
          echo "   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘         â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—"
          echo "   â•šâ•â•   â•šâ•â•   â•šâ•â•     â•šâ•â•â•šâ•â•â•â•â•â•â•"
          echo -e "\033[0m"

      # 5ï¸âƒ£ Components preview
      - name: Components Preview
        run: |
          echo -e "\033[1;34m==== src/components Preview ====\033[0m"
          if [ -d src/components ]; then
            for file in src/components/*.js; do
              [ -e "$file" ] || continue
              echo -e "\033[1;33m------ $file ------\033[0m"
              head -n 20 "$file"
              echo ""
            done
          else
            echo -e "\033[1;31mNo components folder found\033[0m"
          fi

      # 6ï¸âƒ£ Live Habit Tracker Dashboard
      - name: Live Habit Tracker
        run: |
          echo -e "\033[1;34m==== Habit Tracker Dashboard ====\033[0m"
          declare -A habits
          habits=( ["Code Daily"]=$((RANDOM%101)) ["Exercise"]=$((RANDOM%101)) ["Read"]=$((RANDOM%101)) ["Meditate"]=$((RANDOM%101)) )
          
          for habit in "${!habits[@]}"; do
            progress=${habits[$habit]}
            bars=$((progress/10))
            empty=$((10-bars))
            printf "%-12s [" "$habit"
            printf "\033[1;32m"
            for i in $(seq 1 $bars); do printf "#"; done
            printf "\033[0m"
            for i in $(seq 1 $empty); do printf "-"; done
            printf "] %3d%% " "$progress"
            if [ "$progress" -eq 100 ]; then
              echo -e "ğŸ‰"
            else
              echo ""
            fi
          done

          echo ""
          echo -e "\033[1;36mInsights:\033[0m"
          echo "- Crush your habits daily! ğŸš€"
          echo "- Balance is key âš¡"
          echo "- Commit often, level up ğŸ†"
          echo ""

      # 7ï¸âƒ£ Moving Weekly Calendar
      - name: Weekly Calendar
        run: |
          echo -e "\033[1;35m==== Weekly Calendar ====\033[0m"
          DAYS=(Mon Tue Wed Thu Fri Sat Sun)
          TODAY=$(date +%u) # 1=Mon, 7=Sun
          CAL=""
          for i in {1..7}; do
            if [ $i -lt $TODAY ]; then
              CAL+="âœ“ "
            elif [ $i -eq $TODAY ]; then
              CAL+="â†’ "
            else
              CAL+="âœ— "
            fi
          done
          echo "[${DAYS[@]}]"
          echo "[$CAL]"

      # 8ï¸âƒ£ Workflow success confirmation
      - name: Confirm Success
        run: echo -e "\033[1;32mCI/CD LIVE â€” Time-Freeze dashboard fully alive in logs! ğŸ”¥ğŸ”¥ğŸ”¥\033[0m"
